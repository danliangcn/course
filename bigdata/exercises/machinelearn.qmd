---
title: "机器学习作业"
author: ""
date: "`r Sys.Date()`"
format: 
  html:
    toc-depth: 5
---

```{r setup, include=FALSE}

knitr::opts_chunk$set(
  echo = TRUE,
  fig.align = "center",
  message = FALSE,
  warning = FALSE,
  collapse = TRUE,
  cache = FALSE
)

library(tidyverse)

theme_set(theme_light())

library(showtext)
library(sysfonts)

# 加载黑体，最好找到字体的路径再加载 mac可用fc-list :lang=zh命令查看
font_add("Heiti SC", "/System/Library/Fonts/STHeiti Medium.ttc")  

# 启用 showtext 自动渲染
showtext_auto()
```

---

## 机器学习课后作业说明

### 作业目的

* 加深对机器学习中回归、树模型与随机森林等算法的理解。
* 掌握从真实公共管理相关数据出发，从数据准备、模型训练、模型评估、结果解释的完整流程。
* 掌握选择模型和算法的能力，并理解模型优劣、过拟合、泛化、变量重要性等核心概念。
* 为后续整体课程论文做好准备。

### 作业要求与步骤

1. **选数据**

   * 依据上次作业整理好的数据集。
   * 数据应包含多个特征变量（包括分类变量和尺度变量），以及一个清晰的目标变量，以便用于回归或分类任务。

2. **数据预处理**

   * 对数据进行必要清洗与预处理，包括处理缺失值、异常值，进行变量编码和转换，如标准化等。
   * 拆分数据集为训练集与测试集，以便后续模型评估。

3. **模型训练与比较**

   * 根据数据与研究目标，分别训练以下模型（至少每个类别各选1个，至少三个）：

     | 模型类别                  | 算法建议                        |
     | --------------------- | --------------------------- |
     | 回归   | 线性回归、正则化回归（如 Ridge/Lasso） |
     | 树模型            | 决策树          |
     | 集成模型                  | 随机森林         |

   * 对于每个模型：训练模型、用测试集进行预测。

   * 如果你选择分类任务（categorical target），计算评价指标如准确率 (accuracy)、混淆矩阵 (confusion matrix)、召回率 (recall)、精确率 (precision) 等。

   * 如果是回归任务 (continuous target)，计算例如均方根误差(RMSE)、R² 等指标。

4. **变量重要性与模型解释**

   * 对于决策树 / 随机森林模型，提取、报告变量 (feature) 重要性 (feature importance)。
   * 结合变量重要性与回归或分类系数，分析哪些变量对结果影响最大。
   * 讨论为什么这些变量重要？是否符合公共管理或公共政策的逻辑，有什么政策含义？

5. **结果报告**

   * 制作至少 **3个图表** 例如：目标变量分布图 (histogram)，预测 vs 实际值散点图 (scatter + line)，特征变量重要性条形图 (bar chart)，决策树图 (tree plot)等。
   * 结合图表报告结果，内容包括：
     * 数据来源与简要描述 (变量、样本量、特征)
     * 预处理步骤说明 (缺失值、异常值、编码等)
     * 每个模型的训练过程与结果 (包括评价指标)
     * 模型比较 (优劣、适合场景)
     * 变量重要性与结果解释，对公共管理或公共政策的启示
     * 局限性和后续可以改进的方向

### 格式与提交

* **提交形式**：R 脚本文件（.R 或 .Rmd）、清洗后的数据（CSV / RData）和结果报告（PDF）

### 评分标准

| 评分维度                   | 比例 |
| ---------------------- | ------- |
| 数据预处理合理性与清晰度           | 20%     |
| 模型训练 + 结果 (至少三种模型) 完整性 | 25%     |
| 模型比较与选择理由 + 变量重要性分析    | 20%     |
| 可视化和结果解释 (公共管理和政策意义) | 20%     |
| 报告结构、语言、引用规范、代码清晰度     | 15%     |

---

* **提交时间和方式**：两周之后，具体见数字化教学平台。

